<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Sun Jun 12 10:07:33 UTC 2016 -->
<title>ServiceManager (concurrent 1.2.0-SNAPSHOT API)</title>
<meta name="date" content="2016-06-12">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ServiceManager (concurrent 1.2.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../com/diffplug/common/util/concurrent/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><h2><a href="https://github.com/diffplug/durian" style="text-transform: none;">com.diffplug.durian:durian-concurrent:1.2.0-SNAPSHOT</a> by <a href="http://www.diffplug.com" style="text-transform: none;">DiffPlug</a></h2></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html" title="enum in com.diffplug.common.util.concurrent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/diffplug/common/util/concurrent/ServiceManager.html" target="_top">Frames</a></li>
<li><a href="ServiceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.diffplug.common.util.concurrent</div>
<h2 title="Class ServiceManager" class="title">Class ServiceManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.diffplug.common.util.concurrent.ServiceManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="https://diffplug.github.io/durian/javadoc/durian-core/snapshot/com/diffplug/common/annotations/Beta.html?is-external=true" title="class or interface in com.diffplug.common.annotations">@Beta</a>
public final class <span class="typeNameLabel">ServiceManager</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>A manager for monitoring and controlling a set of <a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">services</a>. This class provides methods for <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#startAsync--">starting</a>, <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#stopAsync--">stopping</a> and <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#servicesByState--">inspecting</a> a collection of <a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">services</a>. Additionally, users can monitor state transitions with the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">listener</a> mechanism.</p>
<p><p>While it is recommended that service lifecycles be managed via this class, state transitions initiated via other mechanisms do not impact the correctness of its methods. For example, if the services are started by some mechanism besides <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#startAsync--"><code>startAsync()</code></a>, the listeners will be invoked when appropriate and <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#awaitHealthy--"><code>awaitHealthy()</code></a> will still work as expected.</p>
<p><p>Here is a simple example of how to use a <code>ServiceManager</code> to start a server. <pre> <code>
class Server {
  public static void main(String[] args) {
    Set&lt;Service&gt; services = ...;
    ServiceManager manager = new ServiceManager(services);
    manager.addListener(new Listener() {
        public void stopped() {}  public void healthy() {  // Services have been initialized and are healthy, start accepting requests&amp;hellip;  }  public void failure(Service service) {  // Something failed, at this point we could log it, notify a load balancer, or take  // some other action. For now we will just exit.  System.exit(1);  }  },  MoreExecutors.directExecutor());&lt;/p&gt;
&lt;pre&gt;&lt;code class="no-highlight"&gt;Runtime.getRuntime().addShutdownHook(new Thread() {
  public void run() {
    // Give the services 5 seconds to stop to ensure that we are responsive to shutdown
    // requests.
    try {
      manager.stopAsync().awaitStopped(5, TimeUnit.SECONDS);
    } catch (TimeoutException timeout) {
      // stopping timed out
    }
  }
});
manager.startAsync();  // start all the services asynchronously
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;} }</code></pre></p>
<p><p>This class uses the ServiceManager&rsquo;s methods to start all of its services, to respond to service failure and to ensure that when the JVM is shutting down all the services are stopped.</p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>14.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">ServiceManager.Listener</a></span></code>
<div class="block">A listener for the aggregate state changes of the services that are under management.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#ServiceManager-java.lang.Iterable-">ServiceManager</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;? extends <a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>&gt;&nbsp;services)</code>
<div class="block">Constructs a new instance for managing the given services.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#addListener-com.diffplug.common.util.concurrent.ServiceManager.Listener-">addListener</a></span>(<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener)</code>
<div class="block">Registers a <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be run when this <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> changes state.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#addListener-com.diffplug.common.util.concurrent.ServiceManager.Listener-java.util.concurrent.Executor-">addListener</a></span>(<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent">Executor</a>&nbsp;executor)</code>
<div class="block">Registers a <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true#execute-java.lang.Runnable-" title="class or interface in java.util.concurrent">executed</a> on the given executor.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#awaitHealthy--">awaitHealthy</a></span>()</code>
<div class="block">Waits for the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#awaitHealthy-long-java.util.concurrent.TimeUnit-">awaitHealthy</a></span>(long&nbsp;timeout,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Waits for the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a> for no more than the given time.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#awaitStopped--">awaitStopped</a></span>()</code>
<div class="block">Waits for the all the services to reach a terminal state.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#awaitStopped-long-java.util.concurrent.TimeUnit-">awaitStopped</a></span>(long&nbsp;timeout,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Waits for the all the services to reach a terminal state for no more than the given time.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">isHealthy</a></span>()</code>
<div class="block">Returns true if all services are currently in the <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#RUNNING">running</a> state.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="https://diffplug.github.io/durian/javadoc/durian-collect/snapshot/com/diffplug/common/collect/ImmutableMultimap.html?is-external=true" title="class or interface in com.diffplug.common.collect">ImmutableMultimap</a>&lt;<a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html" title="enum in com.diffplug.common.util.concurrent">Service.State</a>,<a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#servicesByState--">servicesByState</a></span>()</code>
<div class="block">Provides a snapshot of the current state of all the services under management.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent">ServiceManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#startAsync--">startAsync</a></span>()</code>
<div class="block">Initiates service <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#startAsync--">startup</a> on all the services being managed.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="https://diffplug.github.io/durian/javadoc/durian-collect/snapshot/com/diffplug/common/collect/ImmutableMap.html?is-external=true" title="class or interface in com.diffplug.common.collect">ImmutableMap</a>&lt;<a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#startupTimes--">startupTimes</a></span>()</code>
<div class="block">Returns the service load times.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent">ServiceManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#stopAsync--">stopAsync</a></span>()</code>
<div class="block">Initiates service <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#stopAsync--">shutdown</a> if necessary on all the services being managed.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ServiceManager-java.lang.Iterable-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ServiceManager</h4>
<pre>public&nbsp;ServiceManager(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang">Iterable</a>&lt;? extends <a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>&gt;&nbsp;services)</pre>
<div class="block"><p>Constructs a new instance for managing the given services.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>services</code> - The services to manage</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if not all services are <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#NEW">new</a> or if there are any duplicate services.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addListener-com.diffplug.common.util.concurrent.ServiceManager.Listener-java.util.concurrent.Executor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent">Executor</a>&nbsp;executor)</pre>
<div class="block"><p>Registers a <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true#execute-java.lang.Runnable-" title="class or interface in java.util.concurrent">executed</a> on the given executor. The listener will not have previous state changes replayed, so it is suggested that listeners are added before any of the managed services are <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#startAsync--">started</a>.</p>
<p><p><code>addListener</code> guarantees execution ordering across calls to a given listener but not across calls to multiple listeners. Specifically, a given listener will have its callbacks invoked in the same order as the underlying service enters those states. Additionally, at most one of the listener&rsquo;s callbacks will execute at once. However, multiple listeners&rsquo; callbacks may execute concurrently, and listeners may execute in an order different from the one in which they were registered.</p>
<p><p>RuntimeExceptions thrown by a listener will be caught and logged. Any exception thrown during <code>Executor.execute</code> (e.g., a <code>RejectedExecutionException</code>) will be caught and logged.</p>
<p><p> For fast, lightweight listeners that would be safe to execute in any thread, consider calling <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#addListener-com.diffplug.common.util.concurrent.ServiceManager.Listener-"><code>addListener(Listener)</code></a>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - the listener to run when the manager changes state</dd>
<dd><code>executor</code> - the executor in which the listeners callback methods will be run.</dd>
</dl>
</li>
</ul>
<a name="addListener-com.diffplug.common.util.concurrent.ServiceManager.Listener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;void&nbsp;addListener(<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener)</pre>
<div class="block"><p>Registers a <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be run when this <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> changes state. The listener will not have previous state changes replayed, so it is suggested that listeners are added before any of the managed services are <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#startAsync--">started</a>.</p>
<p><p><code>addListener</code> guarantees execution ordering across calls to a given listener but not across calls to multiple listeners. Specifically, a given listener will have its callbacks invoked in the same order as the underlying service enters those states. Additionally, at most one of the listener&rsquo;s callbacks will execute at once. However, multiple listeners&rsquo; callbacks may execute concurrently, and listeners may execute in an order different from the one in which they were registered.</p>
<p><p>RuntimeExceptions thrown by a listener will be caught and logged.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - the listener to run when the manager changes state</dd>
</dl>
</li>
</ul>
<a name="startAsync--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startAsync</h4>
<pre>public&nbsp;<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent">ServiceManager</a>&nbsp;startAsync()</pre>
<div class="block"><p>Initiates service <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#startAsync--">startup</a> on all the services being managed. It is only valid to call this method if all of the services are <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#NEW">new</a>.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if any of the Services are not <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#NEW"><code>new</code></a> when the  method is called.</dd>
</dl>
</li>
</ul>
<a name="awaitHealthy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitHealthy</h4>
<pre>public&nbsp;void&nbsp;awaitHealthy()</pre>
<div class="block"><p>Waits for the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a>. The manager will become healthy after all the component services have reached the <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#RUNNING">running</a> state.</p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the service manager reaches a state from which it cannot  become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a>.</dd>
</dl>
</li>
</ul>
<a name="awaitHealthy-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitHealthy</h4>
<pre>public&nbsp;void&nbsp;awaitHealthy(long&nbsp;timeout,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                  throws <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block"><p>Waits for the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a> for no more than the given time. The manager will become healthy after all the component services have reached the <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#RUNNING">running</a> state.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code> - if not all of the services have finished starting within the deadline</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the service manager reaches a state from which it cannot  become <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#isHealthy--">healthy</a>.</dd>
</dl>
</li>
</ul>
<a name="stopAsync--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopAsync</h4>
<pre>public&nbsp;<a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html" title="class in com.diffplug.common.util.concurrent">ServiceManager</a>&nbsp;stopAsync()</pre>
<div class="block"><p>Initiates service <a href="../../../../../com/diffplug/common/util/concurrent/Service.html#stopAsync--">shutdown</a> if necessary on all the services being managed.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>this</dd>
</dl>
</li>
</ul>
<a name="awaitStopped--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitStopped</h4>
<pre>public&nbsp;void&nbsp;awaitStopped()</pre>
<div class="block"><p>Waits for the all the services to reach a terminal state. After this method returns all services will either be <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#TERMINATED">terminated</a> or <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#FAILED">failed</a>.</p></div>
</li>
</ul>
<a name="awaitStopped-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitStopped</h4>
<pre>public&nbsp;void&nbsp;awaitStopped(long&nbsp;timeout,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                  throws <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block"><p>Waits for the all the services to reach a terminal state for no more than the given time. After this method returns all services will either be <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#TERMINATED">terminated</a> or <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#FAILED">failed</a>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code> - if not all of the services have stopped within the deadline</dd>
</dl>
</li>
</ul>
<a name="isHealthy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isHealthy</h4>
<pre>public&nbsp;boolean&nbsp;isHealthy()</pre>
<div class="block"><p>Returns true if all services are currently in the <a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html#RUNNING">running</a> state.</p>
<p><p>Users who want more detailed information should use the <a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.html#servicesByState--"><code>servicesByState()</code></a> method to get detailed information about which services are not running.</p></div>
</li>
</ul>
<a name="servicesByState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>servicesByState</h4>
<pre>public&nbsp;<a href="https://diffplug.github.io/durian/javadoc/durian-collect/snapshot/com/diffplug/common/collect/ImmutableMultimap.html?is-external=true" title="class or interface in com.diffplug.common.collect">ImmutableMultimap</a>&lt;<a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html" title="enum in com.diffplug.common.util.concurrent">Service.State</a>,<a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>&gt;&nbsp;servicesByState()</pre>
<div class="block"><p>Provides a snapshot of the current state of all the services under management.</p>
<p><p>N.B. This snapshot is guaranteed to be consistent, i.e. the set of states returned will correspond to a point in time view of the services.</p></div>
</li>
</ul>
<a name="startupTimes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startupTimes</h4>
<pre>public&nbsp;<a href="https://diffplug.github.io/durian/javadoc/durian-collect/snapshot/com/diffplug/common/collect/ImmutableMap.html?is-external=true" title="class or interface in com.diffplug.common.collect">ImmutableMap</a>&lt;<a href="../../../../../com/diffplug/common/util/concurrent/Service.html" title="interface in com.diffplug.common.util.concurrent">Service</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;startupTimes()</pre>
<div class="block"><p>Returns the service load times. This value will only return startup times for services that have finished starting.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Map of services and their corresponding startup time in millis, the map entries will be  ordered by startup time.</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../com/diffplug/common/util/concurrent/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><h2><a href="https://github.com/diffplug/durian" style="text-transform: none;">com.diffplug.durian:durian-concurrent:1.2.0-SNAPSHOT</a> by <a href="http://www.diffplug.com" style="text-transform: none;">DiffPlug</a></h2><script type="text/javascript" src="../../../../../highlight.pack.js"></script>
<script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
//--></script></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/diffplug/common/util/concurrent/Service.State.html" title="enum in com.diffplug.common.util.concurrent"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/diffplug/common/util/concurrent/ServiceManager.Listener.html" title="class in com.diffplug.common.util.concurrent"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/diffplug/common/util/concurrent/ServiceManager.html" target="_top">Frames</a></li>
<li><a href="ServiceManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
